# datahub-ui

Reusable UI components and [API](http://docs.planetos.com/) wrappers to build data apps at [Planet OS](https://planetos.com/)

You can read a blog post about it [here](https://medium.com/planet-os/insights-from-designing-datahub-ui-in-d3-js-d8f0f5da0b82). See some of these components in action [here](https://planet-os.github.io/ui-components/datahub-ui/example/index.html). Tests are available [here](https://planet-os.github.io/ui-components/datahub-ui/test/).

The documentation is available below as well as [here](https://planet-os.github.io/ui-components/datahub-ui/doc/index.html)

## Development

_Notice: The components will be out of beta when they will reach v1.0.0. But they are used in production for [Planet OS Datahub](http://data.planetos.com/datasets) and for custom [Powerboards](https://planetos.com/powerboard/). We will start accepting pull requests and bug reports once out of beta. In the meantime, here is how to use the library._

Datahub.js and datahub-min.js can also be loaded from <https://planet-os.github.io/ui-components/datahub-ui/dist/datahub.js>

To compile datahub.js and datahub-min.js

```javascript
npm install
// and run Rollup with
npm run build
npm run build-min
npm run build-watch
```

While the library is in development, the best way to keep it up-to-date is by using [npm link](https://docs.npmjs.com/cli/link) from the downloaded repo.

```javascript
cd /datahub-ui
npm link
cd ../project-folder
npm install
npm uninstall datahub-ui
npm link datahub-ui
```

## Documentation

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### multiChart

A configurable line/bar/area chart.

**Parameters**

-   `config` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The initial configuration can be passed on init or later using multiChart.setConfig.
    -   `config.parent` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The parent DOM element.
    -   `config.width` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** External width of the chart. (optional, default `parent.innerWidth`)
    -   `config.height` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** External height of the chart. (optional, default `parent.innerHeight`)
    -   `config.margin` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Margins around a chart panel. (optional, default `{top:50,right:50,bottom:100,left:50}`)
    -   `config.axisXFormat` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Label x labels format, as passed to d3.utcFormat. (optional, default `'%b'`)
    -   `config.axisTitleX` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** X axis title.
    -   `config.axisTitleY` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Y axis title.
    -   `config.chartTitle` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Chart title.
    -   `config.data` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Data can be passed on init or later using multichart.setData.
    -   `config.reverseY` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?** Reverse the Y axis so higher values are on the bottom.
    -   `config.autoScaleY` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?** Auto range the scale from y data instead of clamping min to zero or negative.
    -   `config.domain` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>?** [min, max] domain of the y scale.
    -   `config.labelsRewriterY` **[function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)?** Y axis label rewriting function. Receives (label, index) and has to return a string or a DOM string.

**Examples**

```javascript
datahub.multiChart({
    parent: document.querySelector('.chart'),
    data: {
        timestamp: datahub.data.generateTimestamps(),
        barData: datahub.data.generateTimeSeries()
    }
})
```

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** A multichart instance.

#### setData

Set the data.

**Parameters**

-   `data` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** A data object.

**Examples**

```javascript
datahub.multiChart({
    parent: document.querySelector('.chart'),
})
.setData({
    timestamp: datahub.data.generateTimestamps(),
    barData: datahub.data.generateTimeSeries()
})
```

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The multiChart instance.

#### setConfig

Set the config after its instantiation.

**Parameters**

-   `config` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The same config format as on init.

**Examples**

```javascript
datahub.multiChart({
    parent: document.querySelector('.chart'),
})
.setConfig({
    width: 100
})
```

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The multiChart instance.

#### destroy

Destroys DOM elements and unbind events.

**Examples**

```javascript
var chart = datahub.multiChart({
    parent: document.querySelector('.chart'),
})
chart.destroy()
```

#### on

Events binder.

**Parameters**

-   `eventName` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The name of the event: 'hover', 'click', 'mouseout', 'active'
-   `callback` **[function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** The callback for this event

**Examples**

```javascript
datahub.multiChart({
    parent: document.querySelector('.chart'),
})
.on('hover', function(e) {
    console.log(e.index, e.timestamp, e.data, e.config, e.event)
})
```
